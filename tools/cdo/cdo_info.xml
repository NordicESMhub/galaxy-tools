<tool id="cdo_info" name="CDO Climate Data Information Operators" profile="20.05" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@">
    <description>to get information on Climate and NWP model data</description>
    <macros>
        <import>macros.xml</import>
        <import>macros_info.xml</import>
    </macros>
    <expand macro="edam_ontology"/>
    <requirements>
        <requirement type="package" version="3">python</requirement>
        <requirement type="package" version="@TOOL_VERSION@">cdo</requirement>
    </requirements>
    <stdio>
        <!-- Anything other than zero or one is an error -->
        <exit_code range="2:" />
        <exit_code range=":-1"/>
        <!-- In case the return code has not been set propery check stderr too -->
        <regex match="Error" />
        <regex match="Exception" />
        <regex match="Abort" />
    </stdio>
    <command><![CDATA[
       cdo 
       '$information.opt'
       '$infile1'
       #if str($information.opt) == "diff" or str($information.opt) == "diffn"
           '$information.infile2'
       #end if
       > $info
    ]]></command>
    <inputs>
        <expand macro="operator_information"/>
    </inputs>
    <outputs>
        <data name="info" format="txt"/>
    </outputs>
    <tests>
        <test>
            <param name="infile1" ftype="netcdf" value="WMI_Lear.nc"/>
            <conditional name="information">
                <param name="opt" value="info" />
            </conditional>
            <output name="info" value="WMI_Lear_info.txt" compare="sim_size" delta="10"/>
        </test>
        <test>
            <param name="infile1" ftype="netcdf" value="WMI_Lear.nc"/>
            <conditional name="information">
                <param name="diff" value="info" />
                <param name="infile2" ftype="netcdf" value="WMI_Lear_modified.nc"/>
            </conditional>
            <output name="info" value="WMI_Lear_diff.txt" compare="sim_size" delta="10"/>
        </test>
        <test>
            <param name="infile1" ftype="netcdf" value="WMI_Lear.nc"/>
            <conditional name="information">
                <param name="opt" value="showdate" />
            </conditional>
            <output name="info" value="WMI_Lear_showdate.txt" compare="sim_size" delta="10"/>
        </test>
        <test>
            <param name="infile1" ftype="netcdf" value="WMI_Lear.nc"/>
            <conditional name="information">
                <param name="opt" value="griddes" />
            </conditional>
            <output name="info" value="WMI_Lear_griddes.txt" compare="sim_size" delta="10"/>
        </test>
    </tests>
    <help><![CDATA[

**CDO Climate Data Information Operators**
=======================================================================================================

This tool is a wrapper to the Climate Data Operators (CDO) for all Information Operators.

- CDO Information operators return information about the input file(s). Output is written in a text file.
- CDO is a collection of command line Operators to manipulate and analyse Climate and NWP model Data.
- There are more than 600 operators available.

- `CDO online documentation <https://code.mpimet.mpg.de/projects/cdo/>`_.

    ]]></help>
    <expand macro="citations"/>
</tool>
